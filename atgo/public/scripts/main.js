var nexo=nexo||{};nexo.NexoTermList=Backbone.Collection.extend({model:nexo.NexoTerm,url:"http://localhost:8182/graphs/neo4jnexo/vertices?key=name&value=NeXO:8888"});var nexo=nexo||{};nexo.NexoTerm=Backbone.Model.extend({defaults:{name:"unknown",description:"-",robustness:0},idAttribute:"_id",toJSON:function(){return{_id:1,name:"test"}}});var nexo=nexo||{};(function(){"use strict";var UNNAMED_NEXO_TERM="Unnamed functional unit",MAX_DISPLAY_GENES=10,SearchResultRenderer=function(){};SearchResultRenderer.prototype.render=function(json){console.log("Result: \n"+JSON.stringify(json));for(var rows="<tr><th>ID</th><th>Name</th><th>Description</th><th>Assigned Genes</th></tr>",i=0;json.length>i;i++){var term=json[i],termID=term.name,name="",description="",assignedGenes="",genes=term["Assigned Genes"],bestAligned=term["Best Alignment Ontology"];if(0===termID.indexOf("S"))name=term["Term or Gene Label"],description=term["SGD Gene Description"],assignedGenes="-";else{var bp=term["BP Annotation"],cc=term["CC Annotation"],mf=term["MF Annotation"],bpDef=term["BP Definition"],ccDef=term["CC Definition"],mfDef=term["MF Definition"];name=this.generateTermName(bestAligned,cc,bp,mf),description=this.generateTermDescription(bestAligned,ccDef,bpDef,mfDef),assignedGenes=this.generateGeneList(genes)}rows+="<tr><td><a href='/nexoview/"+termID+"'>",rows+=termID,rows+="</a></td>",rows+="<td>",rows+=name,rows+="</td>",rows+="<td>",rows+=description,rows+="</td>",rows+="<td>",rows+=assignedGenes,rows+="</td>",rows+="</tr>"}$("#result").append(rows).hide().fadeIn(1e3)},SearchResultRenderer.prototype.generateGeneList=function(genes){var geneListElement="";genes=genes.replace("[",""),genes=genes.replace("]","");var geneList=genes.split(","),numberOfGenes=geneList.length,maxItr=MAX_DISPLAY_GENES;MAX_DISPLAY_GENES>numberOfGenes&&(maxItr=numberOfGenes);for(var geneCount=0;maxItr>geneCount;geneCount++)geneListElement+=geneList[geneCount]+", ";return numberOfGenes>MAX_DISPLAY_GENES?geneListElement+="<a href='#'>...</a>":geneListElement=geneListElement.substring(0,geneListElement.length-2),geneListElement},SearchResultRenderer.prototype.generateTermName=function(best,cc,bp,mf){var name="";return""===cc&&""==bp&&""==mf?UNNAMED_NEXO_TERM:name="cc"===best?"<h4>CC: "+cc+"</h4>"+"BP: "+bp+", MF"+mf:"bp"===best?"<h4>BP: "+bp+"</h4>"+"CC: "+cc+", MF: "+mf:"mf"===best?"<h4>MF: "+mf+"</h4>"+"BP: "+bp+", CC:"+cc:UNNAMED_NEXO_TERM},SearchResultRenderer.prototype.generateTermDescription=function(best,cc,bp,mf){var description="";return description="cc"===best&&""!=cc?cc:"bp"===best&&""!=bp?bp:"mf"===best&&""!=mf?mf:""},$(function(){var renderer=new SearchResultRenderer;$("#search").click(function(){var searchTerm=$("#search-term").val();$("#result").fadeOut(1e3).empty(),$.getJSON("/search/nexo/"+searchTerm,function(json){renderer.render(json)})})})})(),this.JST=this.JST||{},function(){function c(a){var b={};return a.forEach(function(a,c){b[a]=c}),b}function d(a,b){Object.keys(a).forEach(function(c){b[c]=a[c]})}function e(a){return Math.min.apply(null,a)}function f(a){return Math.max.apply(null,a)}function g(a){return Array.prototype.concat.apply([],a)}function i(a){return Object.keys(a).map(function(b){return a[b]})}function j(a){for(var b={},c=0;a.length>c;++c)for(var d=a[c],e=0;d.length>e;++e){var f=d[e];b[f]=f}var g=[];for(var h in b)g.push(b[h]);return g}function p(a,b,c,d){return function(e){return arguments.length?(b[c]=e,d&&d(e),a):b[c]}}function q(){function c(b){var d=a,f=2*b,g=f+1,h=b;d.length>f&&(h=d[f].pri<d[h].pri?f:h,d.length>g&&(h=d[g].pri<d[h].pri?g:h),h!==b&&(e(b,h),c(h)))}function d(b){for(var f,c=a,d=c[b].pri;b>0&&(f=b>>1,!(d>c[f].pri));)e(b,f),b=f}function e(c,d){var e=a,f=b,g=e[c];e[c]=e[d],e[d]=g,f[e[c].key]=c,f[e[d].key]=d}function f(){return a.length}function g(){return Object.keys(b)}function h(a){return a in b}function i(c){var d=b[c];return void 0!==d?a[d].pri:void 0}function j(c,e){if(c in b)return!1;var f={key:c,pri:e},g=a.length;return b[c]=g,a.push(f),d(g),!0}function k(){return f()>0?a[0].key:void 0}function l(){e(0,a.length-1);var d=a.pop();return delete b[d.key],c(0),d.key}function m(c,e){var f=b[c];if(e>a[f].pri)throw Error("New priority is greater than current priority. Key: "+c+" Old: "+a[f].pri+" New: "+e);a[f].pri=e,d(f)}var a=[],b={};return{size:f,keys:g,has:h,priority:i,add:j,min:k,removeMin:l,decrease:m}}dagre={},dagre.version="0.0.6",dagre.graph={},dagre.graph=function(){function k(a,b,c){var d=a[b];d||(d=a[b]={count:0,edges:{}}),d.count++,d.edges[c]=!0}function l(a,b,c){var d=a[b];0==--d.count?delete a[b]:delete d.edges[c]}function m(b){var c=a[b];if(b in a)return c;throw Error("Node '"+b+"' is not in graph:\n"+(""+e))}function n(a){var b=d[a];if(!b)throw Error("Edge '"+a+"' is not in graph:\n"+(""+e));return b}var a={},b={},c={},d={},e={},f=0;return e.addNode=function(d,f){if(e.hasNode(d))throw Error("Graph already has node '"+d+"':\n"+(""+e));a[d]={id:d,value:f},b[d]={},c[d]={}},e.delNode=function(d){m(d),e.edges(d).forEach(function(a){e.delEdge(a)}),delete b[d],delete c[d],delete a[d]},e.node=function(a){return m(a).value},e.hasNode=function(b){return b in a},e.addEdge=function(a,g,h,i){if(m(g),m(h),null===a)a="_ANON-"+ ++f;else if(e.hasEdge(a))throw Error("Graph already has edge '"+a+"':\n"+(""+e));d[a]={id:a,source:g,target:h,value:i},k(b[h],g,a),k(c[g],h,a)},e.delEdge=function(a){var e=n(a);l(b[e.target],e.source,a),l(c[e.source],e.target,a),delete d[a]},e.edge=function(a){return n(a).value},e.source=function(a){return n(a).source},e.target=function(a){return n(a).target},e.hasEdge=function(a){return a in d},e.successors=function(b){return m(b),h(c[b]).map(function(b){return a[b].id})},e.predecessors=function(c){return m(c),h(b[c]).map(function(b){return a[b].id})},e.neighbors=function(d){m(d);var e={};return h(c[d]).map(function(a){e[a]=!0}),h(b[d]).map(function(a){e[a]=!0}),h(e).map(function(b){return a[b].id})},e.nodes=function(){var a=[];return e.eachNode(function(b){a.push(b)}),a},e.eachNode=function(b){for(var c in a){var d=a[c];b(d.id,d.value)}},e.edges=function(a,b){var f,g;return arguments.length?1===arguments.length?j([e.inEdges(a),e.outEdges(a)]):2===arguments.length?(m(a),m(b),g=c[a],f=b in g?h(g[b].edges):[],f.map(function(a){return d[a].id})):void 0:(f=[],e.eachEdge(function(a){f.push(a)}),f)},e.eachEdge=function(a){for(var b in d){var c=d[b];a(c.id,c.source,c.target,c.value)}},e.inEdges=function(a){return m(a),g(i(b[a]).map(function(a){return h(a.edges)}))},e.outEdges=function(a){return m(a),g(i(c[a]).map(function(a){return h(a.edges)}))},e.subgraph=function(a){var b=dagre.graph();return a.forEach(function(a){b.addNode(a,e.node(a))}),i(d).forEach(function(a){b.hasNode(a.source)&&b.hasNode(a.target)&&b.addEdge(a.id,a.source,a.target,e.edge(a.id))}),b},e.toString=function(){var b="GRAPH:\n";return b+="    Nodes:\n",h(a).forEach(function(c){b+="        "+c+": "+JSON.stringify(a[c].value)+"\n"}),b+="    Edges:\n",h(d).forEach(function(a){var c=d[a];b+="        "+a+" ("+c.source+" -> "+c.target+"): "+JSON.stringify(d[a].value)+"\n"}),b},e},dagre.layout=function(){function h(){var b=dagre.graph(),c=0;return a.nodes.forEach(function(a){var d="id"in a?a.id:"_N"+c++;a.dagre={id:d,width:a.width,height:a.height},b.addNode(d,a.dagre)}),a.edges.forEach(function(a){var d=a.source.dagre.id;if(!b.hasNode(d))throw Error("Source node for '"+a+"' not in node list");var e=a.target.dagre.id;if(!b.hasNode(e))throw Error("Target node for '"+a+"' not in node list");if(a.dagre={points:[]},d!==e){var f="id"in a?a.id:"_E"+c++;a.dagre.id=f,a.dagre.minLen=a.minLen||1,a.dagre.width=a.width||0,a.dagre.height=a.height||0,b.addEdge(f,d,e,a.dagre)}}),b}function i(){var b=g.rankSep();try{if(!a.nodes.length)return;var i=h();i.eachEdge(function(a,b,c,d){d.minLen*=2}),g.rankSep(b/2),c.run(i),d.run(i),j(i),e.run(i),f.run(i),k(i),l(i),c.undo(i)}finally{g.rankSep(b)}return g}function j(a){var b=0;a.eachEdge(function(c,d,e,f){var g=a.node(d).rank,h=a.node(e).rank;if(h>g+1){for(var i=d,j=g+1,k=0;h>j;++j,++k){var l="_D"+ ++b,m={width:f.width,height:f.height,edge:{id:c,source:d,target:e,attrs:f},rank:j,dummy:!0};0===k?m.index=0:j+1===h&&(m.index=1),a.addNode(l,m),a.addEdge(null,i,l,{}),i=l}a.addEdge(null,i,e,{}),a.delEdge(c)}})}function k(a){a.eachNode(function(b,c){if(c.dummy&&"index"in c){var d=c.edge;a.hasEdge(d.id)||a.addEdge(d.id,d.source,d.target,d.attrs);var e=a.edge(d.id).points;e[c.index]={x:c.x,y:c.y,ul:c.ul,ur:c.ur,dl:c.dl,dr:c.dr},a.delNode(b)}})}function l(a){a.eachEdge(function(a,b,c,d){d.reversed&&d.points.reverse()})}function m(a){return function(){return arguments.length?(a.apply(null,arguments),g):a()}}var a={nodes:[],edges:[],debugLevel:0},b=o(),c=dagre.layout.acyclic(),d=dagre.layout.rank(),e=dagre.layout.order(),f=dagre.layout.position(),g={};return g.nodes=p(g,a,"nodes"),g.edges=p(g,a,"edges"),g.orderIters=m(e.iterations),g.nodeSep=m(f.nodeSep),g.edgeSep=m(f.edgeSep),g.universalSep=m(f.universalSep),g.rankSep=m(f.rankSep),g.rankDir=m(f.rankDir),g.debugAlignment=m(f.debugAlignment),g.debugLevel=p(g,a,"debugLevel",function(a){b.enabled(a),c.debugLevel(a),d.debugLevel(a),e.debugLevel(a),f.debugLevel(a)}),g.run=b.wrap("Total layout",i),g},dagre.layout.acyclic=function(){function d(b){function f(a){a in d||(d[a]=c[a]=!0,b.outEdges(a).forEach(function(d){var h,g=b.target(d);g in c?(h=b.edge(d),b.delEdge(d),h.reversed=!0,++e,b.addEdge(d,g,a,h)):f(g)}),delete c[a])}var c={},d={},e=0;b.eachNode(function(a){f(a)}),a.debugLevel>=2&&console.log("Acyclic Phase: reversed "+e+" edge(s)")}var a={debugLevel:0},b=o(),c={};return c.debugLevel=p(c,a,"debugLevel",function(a){b.enabled(a)}),c.run=b.wrap("Acyclic Phase",d),c.undo=function(a){a.eachEdge(function(b,c,d,e){e.reversed&&(delete e.reversed,a.delEdge(b),a.addEdge(b,d,c,e))})},c},dagre.layout.rank=function(){function d(a){f(a),k(a).forEach(function(b){var c=a.subgraph(b);g(c),h(c)})}function f(a){var b={},c=q();for(a.eachNode(function(d){c.add(d,a.inEdges(d).length),b[d]=0});c.size()>0;){var d=c.min();if(c.priority(d)>0)throw Error("Input graph is not acyclic: "+(""+a));c.removeMin();var e=b[d];a.node(d).rank=e,a.outEdges(d).forEach(function(d){var f=a.target(d);b[f]=Math.max(b[f],e+(a.edge(d).minLen||1)),c.decrease(f,c.priority(f)-1)})}}function g(a){function e(f,g){d[f]=!0,a.node(f).rank=g,c[f].forEach(function(c){if(!(c in d)){var h=b[i(f,c)];e(c,g+(a.edges(f,c).length?h:-h))}})}var b={};a.eachEdge(function(a,c,d,e){var f=i(c,d);b[f]=Math.max(b[f]||1,e.minLen||1)});var c=dagre.util.prim(a,function(c,d){return Math.abs(a.node(c).rank-a.node(d).rank)-b[i(c,d)]}),d={};return e(a.nodes()[0],0),c}function h(a){var b=e(a.nodes().map(function(b){return a.node(b).rank}));a.eachNode(function(a,c){c.rank-=b})}function i(a,b){return b>a?a.length+":"+a+"-"+b:b.length+":"+b+"-"+a}var a={debugLevel:0},b=o(),c={};return c.debugLevel=p(c,a,"debugLevel",function(a){b.enabled(a)}),c.run=b.wrap("Rank Phase",d),c},dagre.layout.order=function(){function f(c){var d=g(c),e=m(d),f=a(c,d);b.debugLevel>=2&&console.log("Order phase start cross count: "+f);var h,i,k;for(i=0,k=0;4>k&&b.iterations>i;++i,++k)h=j(c,i,d),f>h&&(e=m(d),f=h,k=0),b.debugLevel>=3&&console.log("Order phase iter "+i+" cross count: "+f);return e.forEach(function(a){a.forEach(function(a,b){c.node(a).order=b})}),b.debugLevel>=2&&(console.log("Order iterations: "+i),console.log("Order phase best cross count: "+f)),e}function g(a){var b=[];return a.eachNode(function(a,c){var d=b[c.rank]||(b[c.rank]=[]);d.push(a)}),b}function h(a){return function(b){var c=[];return a.inEdges(b).forEach(function(b){c.push(a.source(b))}),c}}function i(a){return function(b){var c=[];return a.outEdges(b).forEach(function(b){c.push(a.target(b))}),c}}function j(b,c,d){if(0===c%2)for(var e=1;d.length>e;++e)k(d[e-1],d[e],h(b));else for(var e=d.length-2;e>=0;--e)k(d[e+1],d[e],i(b));return a(b,d)}function k(a,b,d){var e=c(b),f=l(a,b,d),g=b.filter(function(a){return-1!==f[a]});g.sort(function(a,b){return f[a]-f[b]||e[a]-e[b]});for(var h=b.length-1;h>=0;--h)-1!==f[b[h]]&&(b[h]=g.pop())}function l(a,b,d){var e=c(a),f={};return b.forEach(function(a){var b=-1,c=d(a);c.length>0&&(b=0,c.forEach(function(a){b+=e[a]}),b/=c.length),f[a]=b}),f}function m(a){return a.map(function(a){return a.slice(0)})}var b={iterations:24,debugLevel:0},d=o(),e={};return e.iterations=p(e,b,"iterations"),e.debugLevel=p(e,b,"debugLevel",function(a){d.enabled(a)}),e.run=d.wrap("Order Phase",f),e._barycenterLayer=k,e};var a=dagre.layout.order.crossCount=function(a,c){var e,d=0;return c.forEach(function(c){e&&(d+=b(a,e,c)),e=c}),d},b=dagre.layout.order.bilayerCrossCount=function(a,b,d){var e=c(d),f=[];b.forEach(function(b){var c=[];a.outEdges(b).forEach(function(b){c.push(e[a.target(b)])}),c.sort(function(a,b){return a-b}),f=f.concat(c)});for(var g=1;d.length>g;)g<<=1;var h=2*g-1;g-=1;for(var i=[],j=0;h>j;++j)i[j]=0;var k=0;return f.forEach(function(a){var b=a+g;for(++i[b];b>0;)b%2&&(k+=i[b+1]),b=b-1>>1,++i[b]}),k};dagre.layout.position=function(){function d(b){var c=[];b.eachNode(function(a,b){var d=c[b.rank]||(c[b.rank]=[]);d[b.order]=a});var d=h(b,c),g={};["u","d"].forEach(function(a){"d"===a&&c.reverse(),["l","r"].forEach(function(e){"r"===e&&r(c);var f=a+e,h=j(b,c,d,"u"===a?"predecessors":"successors");g[f]=k(b,c,h.pos,h.root,h.align),"r"===e&&q(g[f]),"r"===e&&r(c)}),"d"===a&&c.reverse()}),n(b,c,g),b.eachNode(function(a){var c=[];for(var d in g)w(d,b,a,g[d][a]),c.push(g[d][a]);c.sort(function(a,b){return a-b}),v(b,a,(c[1]+c[2])/2)});var i=e(b.nodes().map(function(a){return v(b,a)-s(b,a)/2}));b.eachNode(function(a){v(b,a,v(b,a)-i)});var l=0;c.forEach(function(c){var d=f(c.map(function(a){return t(b,a)}));l+=d/2,c.forEach(function(a){x(b,a,l)}),l+=d/2+a.rankSep})}function g(a,b){return b>a?(""+a).length+":"+a+"-"+b:(""+b).length+":"+b+"-"+a}function h(a,b){var c={},d={};if(2>=b.length)return c;b[1].forEach(function(a,b){d[a]=b});for(var e=1;b.length-1>e;++e)for(var f=b[e],h=b[e+1],i=0,j=0,k=0;h.length>k;++k){var l=h[k];d[l]=k;var m=void 0;if(a.node(l).dummy){var n=a.predecessors(l)[0];a.node(n).dummy&&(m=d[n])}if(void 0===m&&k===h.length-1&&(m=f.length-1),void 0!==m){for(;k>=j;++j)a.predecessors(h[j]).forEach(function(a){var b=d[a];(i>b||b>m)&&(c[g(h[j],a)]=!0)});i=m}}return c}function j(a,b,c,d){var e={},f={},h={};return b.forEach(function(a){a.forEach(function(a,b){f[a]=a,h[a]=a,e[a]=b})}),b.forEach(function(b){var i=-1;b.forEach(function(b){var k,j=a[d](b);j.length>0&&(j.sort(function(a,b){return e[a]-e[b]}),k=(j.length-1)/2,j.slice(Math.floor(k),Math.ceil(k)+1).forEach(function(a){h[b]===b&&!c[g(a,b)]&&e[a]>i&&(h[a]=b,h[b]=f[b]=f[a],i=e[a])}))})}),{pos:e,root:f,align:h}}function k(a,b,c,d,e){function k(b){if(!(b in j)){j[b]=0;var i=b;do{if(c[i]>0){var l=d[h[i]];k(l),f[b]===b&&(f[b]=f[l]);var m=u(a,h[i])+u(a,i);f[b]!==f[l]?g[f[l]]=Math.min(g[f[l]]||Number.POSITIVE_INFINITY,j[b]-j[l]-m):j[b]=Math.max(j[b],j[l]+m)}i=e[i]}while(i!==b)}}var f={},g={},h={},j={};return b.forEach(function(a){a.forEach(function(b,c){f[b]=b,c>0&&(h[b]=a[c-1])})}),i(d).forEach(function(a){k(a)}),b.forEach(function(a){a.forEach(function(a){j[a]=j[d[a]];var b=g[f[a]];d[a]===a&&Number.POSITIVE_INFINITY>b&&(j[a]+=b)})}),j}function l(a,b,c){return e(b.map(function(a){var b=a[0];return c[b]}))}function m(a,b,c){return f(b.map(function(a){var b=a[a.length-1];return c[b]}))}function n(a,b,c){var f,d={},e={},g={},h=Number.POSITIVE_INFINITY;for(var i in c){var j=c[i];d[i]=l(a,b,j),e[i]=m(a,b,j);var k=e[i]-d[i];h>k&&(h=k,f=i)}["u","d"].forEach(function(a){["l","r"].forEach(function(b){var c=a+b;g[c]="l"===b?d[f]-d[c]:e[f]-e[c]})});for(var i in c)a.eachNode(function(a){c[i][a]+=g[i]})}function q(a){for(var b in a)a[b]=-a[b]}function r(a){a.forEach(function(a){a.reverse()})}function s(b,c){switch(a.rankDir){case"LR":return b.node(c).height;default:return b.node(c).width}}function t(b,c){switch(a.rankDir){case"LR":return b.node(c).width;default:return b.node(c).height}}function u(b,c){if(null!==a.universalSep)return a.universalSep;var d=s(b,c),e=b.node(c).dummy?a.edgeSep:a.nodeSep;return(d+e)/2}function v(b,c,d){switch(a.rankDir){case"LR":if(3>arguments.length)return b.node(c).y;b.node(c).y=d;break;default:if(3>arguments.length)return b.node(c).x;b.node(c).x=d}}function w(b,c,d,e){switch(a.rankDir){case"LR":if(3>arguments.length)return c.node(d)[b];c.node(d)[b]=e;break;default:if(3>arguments.length)return c.node(d)[b];c.node(d)[b]=e}}function x(b,c,d){switch(a.rankDir){case"LR":if(3>arguments.length)return b.node(c).x;b.node(c).x=d;break;default:if(3>arguments.length)return b.node(c).y;b.node(c).y=d}}var a={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30,rankDir:"TB",debugLevel:0},b=o(),c={};return c.nodeSep=p(c,a,"nodeSep"),c.edgeSep=p(c,a,"edgeSep"),c.universalSep=p(c,a,"universalSep"),c.rankSep=p(c,a,"rankSep"),c.rankDir=p(c,a,"rankDir"),c.debugLevel=p(c,a,"debugLevel",function(a){b.enabled(a)}),c.run=b.wrap("Position Phase",d),c},dagre.util={};var h=dagre.util.keys=Object.keys,k=dagre.util.components=function(a){function d(b,e){b in c||(c[b]=!0,e.push(b),a.neighbors(b).forEach(function(a){d(a,e)}))}var b=[],c={};return a.eachNode(function(a){var c=[];d(a,c),c.length>0&&b.push(c)}),b},o=(dagre.util.prim=function(a,b){var c={},d={},e=q();if(0===a.nodes().length)return c;a.eachNode(function(a){e.add(a,Number.POSITIVE_INFINITY),c[a]=[]}),e.decrease(a.nodes()[0],0);for(var f,g=!1;e.size()>0;){if(f=e.removeMin(),f in d)c[f].push(d[f]),c[d[f]].push(f);else{if(g)throw Error("Input graph is not connected:\n"+(""+a));g=!0}a.neighbors(f).forEach(function(a){var c=e.priority(a);if(void 0!==c){var g=b(f,a);c>g&&(d[a]=f,e.decrease(a,g))}})}return c},dagre.util.intersectRect=function(a,b){var i,j,c=a.x,d=a.y,e=b.x-c,f=b.y-d,g=a.width/2,h=a.height/2;return Math.abs(f)*g>Math.abs(e)*h?(0>f&&(h=-h),i=0===f?0:h*e/f,j=h):(0>e&&(g=-g),i=g,j=0===e?0:g*f/e),{x:c+i,y:d+j}},dagre.util.pointStr=function(a){return a.x+","+a.y},function(){var a={},b=!1;return a.enabled=function(c){return arguments.length?(b=c,a):b},a.wrap=function(a,c){return function(){var d=b?(new Date).getTime():null;try{return c.apply(null,arguments)}finally{d&&console.log(a+" time: "+((new Date).getTime()-d)+"ms")}}},a});dagre.dot={},dagre.dot.toGraph=function(a){function f(a,b){c.hasNode(a)||(c.addNode(a,j.get("node",{id:a})),void 0===c.node(a).label&&(c.node(a).label=a)),b&&d(b,c.node(a))}function h(a,b,e){var f=a+"-"+b,h=g[f];h||(h=g[f]=0),g[f]++;var i=e.id||f+"-"+h,k={};d(j.get("edge",e),k),d({id:i},k),c.addEdge(i,a,b,k)}function i(a){var d,b={},c=[];for(c.push(a);0!=c.length;)switch(d=c.pop(),d.type){case"node":b[d.id]=!0;break;case"edge":d.elems.forEach(function(a){c.push(a)});break;case"subgraph":d.stmts.forEach(function(a){c.push(a)})}return dagre.util.keys(b)}function k(a){var b=a.attrs;switch(a.type){case"node":f(a.id,b);break;case"edge":var c,d;a.elems.forEach(function(a){switch(k(a),a.type){case"node":d=[a.id];break;case"subgraph":d=i(a);break;default:throw Error("Unsupported type incident on edge: "+a.type)}c&&c.forEach(function(a){d.forEach(function(c){h(a,c,b),e&&h(c,a,b)})}),c=d});break;case"subgraph":j.enterSubGraph(),a.stmts.forEach(function(a){k(a)}),j.exitSubGraph();break;case"attr":j.set(a.attrType,b);break;default:throw Error("Unsupported statement type: "+a.type)}}var b=dot_parser.parse(a),c=dagre.graph(),e="graph"===b.type,g={},j={_default:{},get:function(b,c){if(void 0!==this._default[b]){var e={};return d(this._default[b],e),d(c,e),e}return c},set:function(b,c){this._default[b]=this.get(b,c)},enterSubGraph:function(){function a(){}a.prototype=this._default;var b=new a;this._default=b},exitSubGraph:function(){this._default=Object.getPrototypeOf(this._default)}};return b.stmts&&b.stmts.forEach(function(a){k(a)}),c},dagre.dot.toObjects=function(a){var b=dagre.dot.toGraph(a),c=b.nodes().map(function(a){return b.node(a)}),d=b.edges().map(function(a){var c=b.edge(a);return c.source=b.node(b.source(a)),c.target=b.node(b.target(a)),c});return{nodes:c,edges:d}},dot_parser=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var b={parse:function(b,c){function k(a){g>e||(e>g&&(g=e,h=[]),h.push(a))}function l(){var a,c,d,g,h,i,j,l,n,o,p,q,r,s,t,u;for(s=e,t=e,a=[],c=M();null!==c;)a.push(c),c=M();if(null!==a)if(u=e,c=I(),null!==c?(d=M(),null!==d?c=[c,d]:(c=null,e=u)):(c=null,e=u),c=null!==c?c:"",null!==c)if(d=J(),null!==d){for(g=[],h=M();null!==h;)g.push(h),h=M();if(null!==g)if(h=C(),h=null!==h?h:"",null!==h){for(i=[],j=M();null!==j;)i.push(j),j=M();if(null!==i)if(123===b.charCodeAt(e)?(j="{",e++):(j=null,0===f&&k('"{"')),null!==j){for(l=[],n=M();null!==n;)l.push(n),n=M();if(null!==l)if(n=m(),n=null!==n?n:"",null!==n){for(o=[],p=M();null!==p;)o.push(p),p=M();if(null!==o)if(125===b.charCodeAt(e)?(p="}",e++):(p=null,0===f&&k('"}"')),null!==p){for(q=[],r=M();null!==r;)q.push(r),r=M();null!==q?a=[a,c,d,g,h,i,j,l,n,o,p,q]:(a=null,e=t)}else a=null,e=t;else a=null,e=t}else a=null,e=t;else a=null,e=t}else a=null,e=t;else a=null,e=t}else a=null,e=t;else a=null,e=t}else a=null,e=t;else a=null,e=t;else a=null,e=t;return null!==a&&(a=function(a,b,c,d){return{type:b,id:c,stmts:d}}(s,a[2],a[4],a[8])),null===a&&(e=s),a}function m(){var a,c,d,g,h,i,j,l,m,o,p;if(m=e,o=e,a=n(),null!==a){for(c=[],d=M();null!==d;)c.push(d),d=M();if(null!==c)if(59===b.charCodeAt(e)?(d=";",e++):(d=null,0===f&&k('";"')),d=null!==d?d:"",null!==d){for(g=[],p=e,h=[],i=M();null!==i;)h.push(i),i=M();if(null!==h)if(i=n(),null!==i){for(j=[],l=M();null!==l;)j.push(l),l=M();null!==j?(59===b.charCodeAt(e)?(l=";",e++):(l=null,0===f&&k('";"')),l=null!==l?l:"",null!==l?h=[h,i,j,l]:(h=null,e=p)):(h=null,e=p)}else h=null,e=p;else h=null,e=p;for(;null!==h;){for(g.push(h),p=e,h=[],i=M();null!==i;)h.push(i),i=M();if(null!==h)if(i=n(),null!==i){for(j=[],l=M();null!==l;)j.push(l),l=M();null!==j?(59===b.charCodeAt(e)?(l=";",e++):(l=null,0===f&&k('";"')),l=null!==l?l:"",null!==l?h=[h,i,j,l]:(h=null,e=p)):(h=null,e=p)}else h=null,e=p;else h=null,e=p}null!==g?a=[a,c,d,g]:(a=null,e=o)}else a=null,e=o;else a=null,e=o}else a=null,e=o;return null!==a&&(a=function(a,b,c){for(var d=[b],e=0;c.length>e;++e)d.push(c[e][1]);return d}(m,a[0],a[3])),null===a&&(e=m),a}function n(){var a;return a=o(),null===a&&(a=r(),null===a&&(a=s(),null===a&&(a=p(),null===a&&(a=q())))),a}function o(){var a,b,c,d,f;if(d=e,f=e,a=F(),null===a&&(a=D(),null===a&&(a=E())),null!==a){for(b=[],c=M();null!==c;)b.push(c),c=M();null!==b?(c=t(),null!==c?a=[a,b,c]:(a=null,e=f)):(a=null,e=f)}else a=null,e=f;return null!==a&&(a=function(a,b,c){return{type:"attr",attrType:b,attrs:c||{}}}(d,a[0],a[2])),null===a&&(e=d),a}function p(){var a,c,d,g,h,i,j;if(i=e,j=e,a=C(),null!==a){for(c=[],d=M();null!==d;)c.push(d),d=M();if(null!==c)if(61===b.charCodeAt(e)?(d="=",e++):(d=null,0===f&&k('"="')),null!==d){for(g=[],h=M();null!==h;)g.push(h),h=M();null!==g?(h=C(),null!==h?a=[a,c,d,g,h]:(a=null,e=j)):(a=null,e=j)}else a=null,e=j;else a=null,e=j}else a=null,e=j;return null!==a&&(a=function(a,b,c){var d={};return d[b]=c,{type:"inlineAttr",attrs:d}}(i,a[0],a[4])),null===a&&(e=i),a}function q(){var a,b,c,d,f;if(d=e,f=e,a=z(),null!==a){for(b=[],c=M();null!==c;)b.push(c),c=M();null!==b?(c=t(),c=null!==c?c:"",null!==c?a=[a,b,c]:(a=null,e=f)):(a=null,e=f)}else a=null,e=f;return null!==a&&(a=function(a,b,c){return{type:"node",id:b,attrs:c||{}}}(d,a[0],a[2])),null===a&&(e=d),a}function r(){var a,b,c,d,f,g,h;if(g=e,h=e,a=y(),null!==a){for(b=[],c=M();null!==c;)b.push(c),c=M();if(null!==b)if(c=w(),null!==c){for(d=[],f=M();null!==f;)d.push(f),f=M();null!==d?(f=t(),f=null!==f?f:"",null!==f?a=[a,b,c,d,f]:(a=null,e=h)):(a=null,e=h)}else a=null,e=h;else a=null,e=h}else a=null,e=h;return null!==a&&(a=function(a,b,c,d){for(var e=[b],f=0;c.length>f;++f)e.push(c[f]);return{type:"edge",elems:e,attrs:d||{}}}(g,a[0],a[2],a[4])),null===a&&(e=g),a}function s(){var a,c,d,g,h,i,j,l,n,o;if(j=e,l=e,n=e,a=H(),null!==a){for(c=[],d=M();null!==d;)c.push(d),d=M();if(null!==c){if(o=e,d=C(),null!==d){for(g=[],h=M();null!==h;)g.push(h),h=M();null!==g?d=[d,g]:(d=null,e=o)}else d=null,e=o;d=null!==d?d:"",null!==d?a=[a,c,d]:(a=null,e=n)}else a=null,e=n}else a=null,e=n;if(a=null!==a?a:"",null!==a)if(123===b.charCodeAt(e)?(c="{",e++):(c=null,0===f&&k('"{"')),null!==c){for(d=[],g=M();null!==g;)d.push(g),g=M();if(null!==d)if(g=m(),null!==g){for(h=[],i=M();null!==i;)h.push(i),i=M();null!==h?(125===b.charCodeAt(e)?(i="}",e++):(i=null,0===f&&k('"}"')),null!==i?a=[a,c,d,g,h,i]:(a=null,e=l)):(a=null,e=l)}else a=null,e=l;else a=null,e=l}else a=null,e=l;else a=null,e=l;return null!==a&&(a=function(a,b,c){return b=b[2]||[],{type:"subgraph",id:b[0],stmts:c}}(j,a[0],a[3])),null===a&&(e=j),a}function t(){var a,b,c,d,f,g,h;if(f=e,g=e,a=u(),null!==a){for(b=[],h=e,c=[],d=M();null!==d;)c.push(d),d=M();for(null!==c?(d=u(),null!==d?c=[c,d]:(c=null,e=h)):(c=null,e=h);null!==c;){for(b.push(c),h=e,c=[],d=M();null!==d;)c.push(d),d=M();null!==c?(d=u(),null!==d?c=[c,d]:(c=null,e=h)):(c=null,e=h)}null!==b?a=[a,b]:(a=null,e=g)}else a=null,e=g;return null!==a&&(a=function(a,b,c){for(var d=b,e=0;c.length>e;++e)d=Q(d,c[e][1]);return d}(f,a[0],a[1])),null===a&&(e=f),a}function u(){var a,c,d,g,h,i,j;if(i=e,j=e,91===b.charCodeAt(e)?(a="[",e++):(a=null,0===f&&k('"["')),null!==a){for(c=[],d=M();null!==d;)c.push(d),d=M();if(null!==c)if(d=v(),d=null!==d?d:"",null!==d){for(g=[],h=M();null!==h;)g.push(h),h=M();null!==g?(93===b.charCodeAt(e)?(h="]",e++):(h=null,0===f&&k('"]"')),null!==h?a=[a,c,d,g,h]:(a=null,e=j)):(a=null,e=j)}else a=null,e=j;else a=null,e=j}else a=null,e=j;return null!==a&&(a=function(a,b){return b}(i,a[2])),null===a&&(e=i),a}function v(){var a,c,d,g,h,i,j,l,m;if(j=e,l=e,a=x(),null!==a){for(c=[],m=e,d=[],g=M();null!==g;)d.push(g),g=M();if(null!==d)if(44===b.charCodeAt(e)?(g=",",e++):(g=null,0===f&&k('","')),g=null!==g?g:"",null!==g){for(h=[],i=M();null!==i;)h.push(i),i=M();null!==h?(i=x(),null!==i?d=[d,g,h,i]:(d=null,e=m)):(d=null,e=m)}else d=null,e=m;else d=null,e=m;for(;null!==d;){for(c.push(d),m=e,d=[],g=M();null!==g;)d.push(g),g=M();if(null!==d)if(44===b.charCodeAt(e)?(g=",",e++):(g=null,0===f&&k('","')),g=null!==g?g:"",null!==g){for(h=[],i=M();null!==i;)h.push(i),i=M();null!==h?(i=x(),null!==i?d=[d,g,h,i]:(d=null,e=m)):(d=null,e=m)}else d=null,e=m;else d=null,e=m}null!==c?a=[a,c]:(a=null,e=l)}else a=null,e=l;return null!==a&&(a=function(a,b,c){for(var d=b,e=0;c.length>e;++e)d=Q(d,c[e][3]);return d}(j,a[0],a[1])),null===a&&(e=j),a}function w(){var a,c,d,g,h,i,j,l;if(i=e,j=e,l=e,"--"===b.substr(e,2)?(a="--",e+=2):(a=null,0===f&&k('"--"')),null!==a?(c=function(){return P}(e)?null:"",null!==c?a=[a,c]:(a=null,e=l)):(a=null,e=l),null===a&&(l=e,"->"===b.substr(e,2)?(a="->",e+=2):(a=null,0===f&&k('"->"')),null!==a?(c=function(){return P}(e)?"":null,null!==c?a=[a,c]:(a=null,e=l)):(a=null,e=l)),null!==a){for(c=[],d=M();null!==d;)c.push(d),d=M();if(null!==c)if(d=y(),null!==d){for(g=[],h=M();null!==h;)g.push(h),h=M();null!==g?(h=w(),h=null!==h?h:"",null!==h?a=[a,c,d,g,h]:(a=null,e=j)):(a=null,e=j)}else a=null,e=j;else a=null,e=j}else a=null,e=j;return null!==a&&(a=function(a,b,c){for(var d=[b],e=0;c.length>e;++e)d.push(c[e]);return d}(i,a[2],a[4])),null===a&&(e=i),a}function x(){var a,c,d,g,h,i,j,l;if(i=e,j=e,a=C(),null!==a){for(l=e,c=[],d=M();null!==d;)c.push(d),d=M();if(null!==c)if(61===b.charCodeAt(e)?(d="=",e++):(d=null,0===f&&k('"="')),null!==d){for(g=[],h=M();null!==h;)g.push(h),h=M();null!==g?(h=C(),null!==h?c=[c,d,g,h]:(c=null,e=l)):(c=null,e=l)}else c=null,e=l;else c=null,e=l;c=null!==c?c:"",null!==c?a=[a,c]:(a=null,e=j)}else a=null,e=j;return null!==a&&(a=function(a,b,c){var d={};return d[b]=c[3],d}(i,a[0],a[1])),null===a&&(e=i),a}function y(){var a,b;return a=s(),null===a&&(b=e,a=z(),null!==a&&(a=function(a,b){return{type:"node",id:b,attrs:{}}}(b,a)),null===a&&(e=b)),a}function z(){var a,b,c,d,f;if(d=e,f=e,a=C(),null!==a){for(b=[],c=M();null!==c;)b.push(c),c=M();null!==b?(c=A(),c=null!==c?c:"",null!==c?a=[a,b,c]:(a=null,e=f)):(a=null,e=f)}else a=null,e=f;return null!==a&&(a=function(a,b){return b}(d,a[0])),null===a&&(e=d),a}function A(){var a,c,d,g,h,i,j,l,m;if(l=e,58===b.charCodeAt(e)?(a=":",e++):(a=null,0===f&&k('":"')),null!==a){for(c=[],d=M();null!==d;)c.push(d),d=M();if(null!==c)if(d=C(),null!==d){for(g=[],h=M();null!==h;)g.push(h),h=M();if(null!==g){if(m=e,58===b.charCodeAt(e)?(h=":",e++):(h=null,0===f&&k('":"')),null!==h){for(i=[],j=M();null!==j;)i.push(j),j=M();null!==i?(j=B(),null!==j?h=[h,i,j]:(h=null,e=m)):(h=null,e=m)}else h=null,e=m;h=null!==h?h:"",null!==h?a=[a,c,d,g,h]:(a=null,e=l)}else a=null,e=l}else a=null,e=l;else a=null,e=l}else a=null,e=l;return a}function B(){var a;return 110===b.charCodeAt(e)?(a="n",e++):(a=null,0===f&&k('"n"')),null===a&&("ne"===b.substr(e,2)?(a="ne",e+=2):(a=null,0===f&&k('"ne"')),null===a&&(101===b.charCodeAt(e)?(a="e",e++):(a=null,0===f&&k('"e"')),null===a&&("se"===b.substr(e,2)?(a="se",e+=2):(a=null,0===f&&k('"se"')),null===a&&(115===b.charCodeAt(e)?(a="s",e++):(a=null,0===f&&k('"s"')),null===a&&("sw"===b.substr(e,2)?(a="sw",e+=2):(a=null,0===f&&k('"sw"')),null===a&&(119===b.charCodeAt(e)?(a="w",e++):(a=null,0===f&&k('"w"')),null===a&&("nw"===b.substr(e,2)?(a="nw",e+=2):(a=null,0===f&&k('"nw"')),null===a&&(99===b.charCodeAt(e)?(a="c",e++):(a=null,0===f&&k('"c"')),null===a&&(95===b.charCodeAt(e)?(a="_",e++):(a=null,0===f&&k('"_"'))))))))))),a}function C(){var a,c,d,g,h,i,j,l,m;if(f++,i=e,j=e,/^[a-zA-Z\u0200-\u0377_]/.test(b.charAt(e))?(a=b.charAt(e),e++):(a=null,0===f&&k("[a-zA-Z\\u0200-\\u0377_]")),null!==a){for(c=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(b.charAt(e))?(d=b.charAt(e),e++):(d=null,0===f&&k("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==d;)c.push(d),/^[a-zA-Z\u0200-\u0377_0-9]/.test(b.charAt(e))?(d=b.charAt(e),e++):(d=null,0===f&&k("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==c?a=[a,c]:(a=null,e=j)}else a=null,e=j;if(null!==a&&(a=function(a,b,c){return b+c.join("")}(i,a[0],a[1])),null===a&&(e=i),null===a){if(i=e,j=e,45===b.charCodeAt(e)?(a="-",e++):(a=null,0===f&&k('"-"')),a=null!==a?a:"",null!==a)if(46===b.charCodeAt(e)?(c=".",e++):(c=null,0===f&&k('"."')),null!==c){if(/^[0-9]/.test(b.charAt(e))?(g=b.charAt(e),e++):(g=null,0===f&&k("[0-9]")),null!==g)for(d=[];null!==g;)d.push(g),/^[0-9]/.test(b.charAt(e))?(g=b.charAt(e),e++):(g=null,0===f&&k("[0-9]"));else d=null;null!==d?a=[a,c,d]:(a=null,e=j)}else a=null,e=j;else a=null,e=j;if(null!==a&&(a=function(a,b,c,d){return b+c+d.join("")}(i,a[0],a[1],a[2])),null===a&&(e=i),null===a){if(i=e,j=e,45===b.charCodeAt(e)?(a="-",e++):(a=null,0===f&&k('"-"')),a=null!==a?a:"",null!==a){if(/^[0-9]/.test(b.charAt(e))?(d=b.charAt(e),e++):(d=null,0===f&&k("[0-9]")),null!==d)for(c=[];null!==d;)c.push(d),/^[0-9]/.test(b.charAt(e))?(d=b.charAt(e),e++):(d=null,0===f&&k("[0-9]"));else c=null;if(null!==c){if(l=e,46===b.charCodeAt(e)?(d=".",e++):(d=null,0===f&&k('"."')),null!==d){for(g=[],/^[0-9]/.test(b.charAt(e))?(h=b.charAt(e),e++):(h=null,0===f&&k("[0-9]"));null!==h;)g.push(h),/^[0-9]/.test(b.charAt(e))?(h=b.charAt(e),e++):(h=null,0===f&&k("[0-9]"));null!==g?d=[d,g]:(d=null,e=l)}else d=null,e=l;d=null!==d?d:"",null!==d?a=[a,c,d]:(a=null,e=j)}else a=null,e=j}else a=null,e=j;if(null!==a&&(a=function(a,b,c,d){return b+c.join("")+(d[0]||"")+(d[1]||[]).join("")}(i,a[0],a[1],a[2])),null===a&&(e=i),null===a){if(i=e,j=e,34===b.charCodeAt(e)?(a='"',e++):(a=null,0===f&&k('"\\""')),null!==a){for(c=[],l=e,'\\"'===b.substr(e,2)?(d='\\"',e+=2):(d=null,0===f&&k('"\\\\\\""')),null!==d&&(d=function(){return'"'}(l)),null===d&&(e=l),null===d&&(l=e,m=e,92===b.charCodeAt(e)?(d="\\",e++):(d=null,0===f&&k('"\\\\"')),null!==d?(/^[^"]/.test(b.charAt(e))?(g=b.charAt(e),e++):(g=null,0===f&&k('[^"]')),null!==g?d=[d,g]:(d=null,e=m)):(d=null,e=m),null!==d&&(d=function(a,b){return"\\"+b}(l,d[1])),null===d&&(e=l),null===d&&(/^[^"]/.test(b.charAt(e))?(d=b.charAt(e),e++):(d=null,0===f&&k('[^"]'))));null!==d;)c.push(d),l=e,'\\"'===b.substr(e,2)?(d='\\"',e+=2):(d=null,0===f&&k('"\\\\\\""')),null!==d&&(d=function(){return'"'
}(l)),null===d&&(e=l),null===d&&(l=e,m=e,92===b.charCodeAt(e)?(d="\\",e++):(d=null,0===f&&k('"\\\\"')),null!==d?(/^[^"]/.test(b.charAt(e))?(g=b.charAt(e),e++):(g=null,0===f&&k('[^"]')),null!==g?d=[d,g]:(d=null,e=m)):(d=null,e=m),null!==d&&(d=function(a,b){return"\\"+b}(l,d[1])),null===d&&(e=l),null===d&&(/^[^"]/.test(b.charAt(e))?(d=b.charAt(e),e++):(d=null,0===f&&k('[^"]'))));null!==c?(34===b.charCodeAt(e)?(d='"',e++):(d=null,0===f&&k('"\\""')),null!==d?a=[a,c,d]:(a=null,e=j)):(a=null,e=j)}else a=null,e=j;null!==a&&(a=function(a,b){return b.join("")}(i,a[1])),null===a&&(e=i)}}}return f--,0===f&&null===a&&k("identifier"),a}function D(){var a,c;return c=e,"node"===b.substr(e,4).toLowerCase()?(a=b.substr(e,4),e+=4):(a=null,0===f&&k('"node"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(e=c),a}function E(){var a,c;return c=e,"edge"===b.substr(e,4).toLowerCase()?(a=b.substr(e,4),e+=4):(a=null,0===f&&k('"edge"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(e=c),a}function F(){var a,c;return c=e,"graph"===b.substr(e,5).toLowerCase()?(a=b.substr(e,5),e+=5):(a=null,0===f&&k('"graph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(e=c),a}function G(){var a,c;return c=e,"digraph"===b.substr(e,7).toLowerCase()?(a=b.substr(e,7),e+=7):(a=null,0===f&&k('"digraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(e=c),a}function H(){var a,c;return c=e,"subgraph"===b.substr(e,8).toLowerCase()?(a=b.substr(e,8),e+=8):(a=null,0===f&&k('"subgraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(e=c),a}function I(){var a,c;return c=e,"strict"===b.substr(e,6).toLowerCase()?(a=b.substr(e,6),e+=6):(a=null,0===f&&k('"strict"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(e=c),a}function J(){var a,b;return a=F(),null===a&&(b=e,a=G(),null!==a&&(a=function(a,b){return P="digraph"===b,b}(b,a)),null===a&&(e=b)),a}function K(){var a,c;if(f++,/^[ \t\r\n]/.test(b.charAt(e))?(c=b.charAt(e),e++):(c=null,0===f&&k("[ \\t\\r\\n]")),null!==c)for(a=[];null!==c;)a.push(c),/^[ \t\r\n]/.test(b.charAt(e))?(c=b.charAt(e),e++):(c=null,0===f&&k("[ \\t\\r\\n]"));else a=null;return f--,0===f&&null===a&&k("whitespace"),a}function L(){var a,c,d,g,h,i,j;if(f++,h=e,"//"===b.substr(e,2)?(a="//",e+=2):(a=null,0===f&&k('"//"')),null!==a){for(c=[],/^[^\n]/.test(b.charAt(e))?(d=b.charAt(e),e++):(d=null,0===f&&k("[^\\n]"));null!==d;)c.push(d),/^[^\n]/.test(b.charAt(e))?(d=b.charAt(e),e++):(d=null,0===f&&k("[^\\n]"));null!==c?a=[a,c]:(a=null,e=h)}else a=null,e=h;if(null===a)if(h=e,"/*"===b.substr(e,2)?(a="/*",e+=2):(a=null,0===f&&k('"/*"')),null!==a){for(c=[],i=e,j=e,f++,"*/"===b.substr(e,2)?(d="*/",e+=2):(d=null,0===f&&k('"*/"')),f--,null===d?d="":(d=null,e=j),null!==d?(b.length>e?(g=b.charAt(e),e++):(g=null,0===f&&k("any character")),null!==g?d=[d,g]:(d=null,e=i)):(d=null,e=i);null!==d;)c.push(d),i=e,j=e,f++,"*/"===b.substr(e,2)?(d="*/",e+=2):(d=null,0===f&&k('"*/"')),f--,null===d?d="":(d=null,e=j),null!==d?(b.length>e?(g=b.charAt(e),e++):(g=null,0===f&&k("any character")),null!==g?d=[d,g]:(d=null,e=i)):(d=null,e=i);null!==c?("*/"===b.substr(e,2)?(d="*/",e+=2):(d=null,0===f&&k('"*/"')),null!==d?a=[a,c,d]:(a=null,e=h)):(a=null,e=h)}else a=null,e=h;return f--,0===f&&null===a&&k("comment"),a}function M(){var a;return a=K(),null===a&&(a=L()),a}function N(a){a.sort();for(var b=null,c=[],d=0;a.length>d;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}function O(){for(var a=1,c=1,d=!1,f=0;Math.max(e,g)>f;f++){var h=b.charAt(f);"\n"===h?(d||a++,c=1,d=!1):"\r"===h||"\u2028"===h||"\u2029"===h?(a++,c=1,d=!0):(c++,d=!1)}return{line:a,column:c}}function Q(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}var d={start:l,stmtList:m,stmt:n,attrStmt:o,inlineAttrStmt:p,nodeStmt:q,edgeStmt:r,subgraphStmt:s,attrList:t,attrListBlock:u,aList:v,edgeRHS:w,idDef:x,nodeIdOrSubgraph:y,nodeId:z,port:A,compassPt:B,id:C,node:D,edge:E,graph:F,digraph:G,subgraph:H,strict:I,graphType:J,whitespace:K,comment:L,_:M};if(void 0!==c){if(void 0===d[c])throw Error("Invalid rule name: "+a(c)+".")}else c="start";var P,e=0,f=0,g=0,h=[],R=d[c]();if(null===R||e!==b.length){var S=Math.max(e,g),T=b.length>S?b.charAt(S):null,U=O();throw new this.SyntaxError(N(h),T,S,U.line,U.column)}return R},toSource:function(){return this._source}};return b.SyntaxError=function(b,c,d,e,f){function g(b,c){var d,e;switch(b.length){case 0:d="end of input";break;case 1:d=b[0];break;default:d=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}return e=c?a(c):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=b,this.found=c,this.message=g(b,c),this.offset=d,this.line=e,this.column=f},b.SyntaxError.prototype=Error.prototype,b}()}();var nexo=nexo||{};nexo.NexoTermView=Backbone.View.extend({tagName:"div",className:"termContainer",template:$("#termTemplate").html(),events:{},render:function(){var tmpl=_.template(this.template);return this.$el.html(tmpl(this.model.toJSON())),this}});var nexo=nexo||{};nexo.NexoTermListView=Backbone.View.extend({el:$("#terms"),initialize:function(){this.collection=new nexo.NexoTermList,this.collection.fetch(),this.render(),this.listenTo(this.collection,"show",this.renderTerm),this.listenTo(this.collection,"reset",this.render)},events:{"click #search":"showTerms"},showTerms:function(e){e.preventDefault();var formData={};$("#search div").children("input").each(function(){console.log("Renderer called!")}),this.collection.create(formData)},render:function(){this.collection.each(function(item){this.renderTerm(item)},this)},renderTerm:function(item){var termView=new nexo.NexoTermView({model:item});this.$el.append(termView.render().el)}});